import{f as p,d as D,C as k,a as b,m as S,D as Ve,u as $,E as N,G as U,c as O,v as F,H as W,P as Ue,k as ve,I as z,J as ue,j as Xe}from"./index-BBrJUYfH.js";import{c as Ye}from"./utils-CGYcAGdn.js";var je=/((?:--)?(?:\w+-?)+)\s*:\s*([^;]*)/g;function qe(t){const e={};let n;for(;n=je.exec(t);)e[n[1]]=n[2];return e}function me(t,e){return typeof e=="string"&&(e=qe(e)),{...t,...e}}var Y=t=>requestAnimationFrame(()=>requestAnimationFrame(t)),Ie=(t,e)=>(t&&(typeof t=="function"?t(e):t[0](t[1],e)),e.defaultPrevented),V=(t,e)=>{if(t.contains(e))return!0;let n=e;for(;n;){if(n===t)return!0;n=n._$host??n.parentElement}return!1},l=t=>typeof t=="function"?t():t,He=t=>(...e)=>{for(const n of t)n&&n(...e)},ne=(...t)=>He(t),pe=(...t)=>t.some(e=>!!e()),Ge=t=>p(()=>l(t.element)?.tagName.toLowerCase()??t.fallback),Je=Ge,he=t=>typeof t=="function"&&t.length>0,Qe=["button","color","file","image","reset","submit"],et=(t,e)=>t==="button"?!0:t==="input"&&e!==void 0?Qe.indexOf(e)!==-1:!1,I=t=>t?"":void 0,tt=t=>{const[e,n]=k(t,["as"]),r=p(()=>e.as??"div");return p(()=>{const i=r();switch(typeof i){case"function":return $(()=>i(n));case"string":return b(Ve,S({component:i},n))}})},j=tt,nt=t=>{const[e,n]=D(null),[r,o]=k(t,["ref","type"]),i=Je({element:e,fallback:"button"}),a=p(()=>et(i(),r.type));return b(j,S({as:"button",ref(u){var s=ne(n,r.ref);typeof s=="function"&&s(u)},get type(){return a()?"button":void 0},get role(){return a()?void 0:"button"}},o))},Le=nt,ee=new Map,re=(t,e)=>{if(ee.has(t))return ee.get(t);const n=U(e);return ee.set(t,n),n},oe=t=>{const e=ee.get(t);if(e)return N(e)},H=new Map,rt=t=>{O(()=>{const e=l(t.style)??{},n=l(t.properties)??[],r={};for(const i in e)r[i]=t.element.style[i];const o=H.get(t.key);o?o.activeCount++:H.set(t.key,{activeCount:1,originalStyles:r,properties:n.map(i=>i.key)}),Object.assign(t.element.style,t.style);for(const i of n)t.element.style.setProperty(i.key,i.value);F(()=>{const i=H.get(t.key);if(i){if(i.activeCount!==1){i.activeCount--;return}H.delete(t.key);for(const[a,u]of Object.entries(i.originalStyles))t.element.style[a]=u;for(const a of i.properties)t.element.style.removeProperty(a);t.element.style.length===0&&t.element.removeAttribute("style"),t.cleanup?.()}})})},de=rt,ot=t=>{const e=S({enabled:!0},t);O(()=>{l(e.enabled)&&(document.addEventListener("keydown",n),F(()=>{document.removeEventListener("keydown",n)}))});const n=r=>{r.key==="Escape"&&e.onEscapeKeyDown(r)}},it=ot,st=t=>{const e=S({enabled:!0},t);O(()=>{const{body:n}=document;l(e.enabled)&&de({key:"no-pointer-events",element:n,style:{pointerEvents:"none"}})})},at=st,lt="dismissible.outsideFocus",ct={bubbles:!1,cancelable:!0},ut=t=>{const e=S({enabled:!0,ignorePointerEvents:!1},t);let n=!1;O(()=>{if(!l(e.enabled))return;const i=l(e.ignorePointerEvents);document.addEventListener("focusin",r),i&&document.addEventListener("pointerdown",o),F(()=>{document.removeEventListener("focusin",r),i&&document.removeEventListener("pointerdown",o)})});const r=i=>{if(n){n=!1;return}const a=l(e.element);if(a&&!V(a,i.target)){const u=new CustomEvent(lt,ct);a.dispatchEvent(u),e.onFocus(u)}},o=()=>{n=!0}},dt=ut,ft=t=>{const e=S({enabled:!0,strategy:"pointerup"},t);O(()=>{if(!l(e.enabled))return;const r=l(e.strategy);document.addEventListener(r,n),F(()=>{document.removeEventListener(r,n)})});const n=r=>{const o=l(e.element),i=l(e.ignore);o&&!V(o,r.target)&&!(i&&i.some(a=>a&&V(a,r.target)))&&e.onPointer(r)}},gt=ft,vt=t=>{const e=S({dismissOnEscapeKeyDown:!0,dismissOnOutsideFocus:!0,dismissOnOutsidePointer:!0,outsidePointerStrategy:"pointerup",noOutsidePointerEvents:!0},t);it({enabled:()=>l(e.dismissOnEscapeKeyDown),onEscapeKeyDown:n=>{e.onEscapeKeyDown?.(n),n.defaultPrevented||e.onDismiss("escapeKey")}}),dt({enabled:()=>l(e.dismissOnOutsideFocus),onFocus:n=>{e.onOutsideFocus?.(n),n.defaultPrevented||e.onDismiss("outsideFocus")},element:()=>l(e.element),ignorePointerEvents:()=>l(e.noOutsidePointerEvents)||l(e.dismissOnOutsidePointer)}),gt({enabled:()=>l(e.dismissOnOutsidePointer),strategy:()=>l(e.outsidePointerStrategy),ignore:()=>l(e.outsidePointerIgnore)??[],onPointer:n=>{if(e.onOutsidePointer?.(n),!n.defaultPrevented){const r=n.button===0&&n.ctrlKey===!0;if(n.button===2||r)return;e.onDismiss("outsidePointer")}},element:()=>l(e.element)}),at({enabled:()=>l(e.noOutsidePointerEvents)})},mt=vt,fe=U(),pt=t=>{const e=S({dismissibleId:W()},t);return p(()=>{if(N(fe))return b(be,t);const[o,i]=D([e.dismissibleId]),a=s=>{i(c=>[...c,s])},u=s=>{i(c=>c.filter(f=>f!==s))};return b(fe.Provider,{value:{layers:o,onLayerShow:a,onLayerDismiss:u},get children(){return b(be,t)}})})},[In,se]=D([]),be=t=>{const e=S({enabled:!0,dismissibleId:W(),dismissOnEscapeKeyDown:!0,dismissOnOutsideFocus:!0,dismissOnOutsidePointer:!0,outsidePointerStrategy:"pointerup",noOutsidePointerEvents:!0},t),[n,r]=k(e,["enabled","children","dismissOnEscapeKeyDown","dismissOnOutsideFocus","dismissOnOutsidePointer","outsidePointerStrategy","outsidePointerIgnore","noOutsidePointerEvents","onDismiss"]),o=N(fe);F(()=>{o.onLayerDismiss(e.dismissibleId),se(s=>s.filter(c=>c!==e.dismissibleId))}),O(()=>{n.enabled?(o.onLayerShow(e.dismissibleId),se(s=>[...s,e.dismissibleId])):(o.onLayerDismiss(e.dismissibleId),se(s=>s.filter(c=>c!==e.dismissibleId)))});const i=()=>o.layers()[o.layers().length-1]===e.dismissibleId;mt({dismissOnEscapeKeyDown:()=>l(n.dismissOnEscapeKeyDown)&&i()&&n.enabled,dismissOnOutsideFocus:()=>l(n.dismissOnOutsideFocus)&&i()&&n.enabled,dismissOnOutsidePointer:()=>l(n.dismissOnOutsidePointer)&&i()&&n.enabled,outsidePointerStrategy:n.outsidePointerStrategy,outsidePointerIgnore:n.outsidePointerIgnore,noOutsidePointerEvents:()=>l(n.noOutsidePointerEvents)&&n.enabled,onDismiss:s=>{n.onDismiss(s)},...r});const a=p(()=>n.children),u=()=>{const s=a();return he(s)?s({get isLastLayer(){return i()}}):s};return $(()=>u())},ht=pt,bt=ht;function St(t){const[e,n]=D(t.initialValue),r=()=>t.value?.()!==void 0,o=()=>r()?t.value?.():e();return[o,a=>$(()=>{let u;return typeof a=="function"?u=a(o()):u=a,Object.is(u,o())||(r()||n(u),t.onChange?.(u)),u})]}var ge=St,Pt='a[href]:not([tabindex="-1"]), button:not([tabindex="-1"]), input:not([tabindex="-1"]), textarea:not([tabindex="-1"]), select:not([tabindex="-1"]), details:not([tabindex="-1"]), [tabindex]:not([tabindex="-1"])',ae="focusTrap.initialFocus",le="focusTrap.finalFocus",Se={bubbles:!1,cancelable:!0},wt=t=>{const e=S({enabled:!0,observeChanges:!0,restoreFocus:!0},t),[n,r]=D(null),o=p(()=>{const d=n();return d?d[0]??null:null}),i=p(()=>{const d=n();return d?d[d.length-1]??null:null});let a=null;const u=()=>{Y(()=>{s(l(e.element)),(document.activeElement===null||document.activeElement===document.body)&&c(l(e.element))})};O(()=>{const d=l(e.element);if(d&&l(e.enabled)){a=document.activeElement,$(()=>{s(d),c(d)});const y=new MutationObserver(u);l(e.observeChanges)&&y.observe(d,{subtree:!0,childList:!0,attributes:!0,attributeFilter:["tabindex"]}),F(()=>{l(e.observeChanges)&&y.disconnect(),r(null),E(d)})}}),O(()=>{const d=n();d===null||d.length!==0||(document.addEventListener("keydown",g),F(()=>{document.removeEventListener("keydown",g)}))}),O(()=>{const d=o();d&&(d.addEventListener("keydown",f),F(()=>{d.removeEventListener("keydown",f)}))}),O(()=>{const d=i();d&&(d.addEventListener("keydown",m),F(()=>{d.removeEventListener("keydown",m)}))});const s=d=>{const y=Array.from(d.querySelectorAll(Pt)).map((h,w)=>({element:h,domIndex:w,tabIndex:h.tabIndex})).sort((h,w)=>h.tabIndex===w.tabIndex?h.domIndex-w.domIndex:h.tabIndex-w.tabIndex);r(y.map(({element:h})=>h))},c=d=>{Y(()=>{const y=l(e.initialFocusElement)??o()??d,h=e.onInitialFocus;let w;h&&(w=new CustomEvent(ae,Se),d.addEventListener(ae,h),d.dispatchEvent(w),d.removeEventListener(ae,h)),w?.defaultPrevented!==!0&&y.focus()})},f=d=>{d.key==="Tab"&&d.shiftKey&&(d.preventDefault(),i().focus())},m=d=>{d.key==="Tab"&&!d.shiftKey&&(d.preventDefault(),o().focus())},g=d=>{d.key==="Tab"&&d.preventDefault()},E=d=>{Y(()=>{if(!l(e.restoreFocus))return;const h=l(e.finalFocusElement)??a;if(!h)return;let w;const T=e.onFinalFocus;T&&(w=new CustomEvent(le,Se),d.addEventListener(le,T),d.dispatchEvent(w),d.removeEventListener(le,T)),w?.defaultPrevented!==!0&&h.focus()})}},yt=wt,Ot=yt,Et=t=>{let e,n=!1;return()=>n?e:(n=!0,e=p(t))},ke=Et,Dt=t=>{const e=p(()=>{const u=l(t.element);if(u)return getComputedStyle(u)}),n=()=>e()?.animationName??"none",[r,o]=D(l(t.show)?"present":"hidden"),i=u=>{o(u),t.onStateChange?.(u)};let a="none";return O(u=>{const s=l(t.show);return $(()=>{if(u===s)return s;const c=a,f=n();s?i("present"):f==="none"||e()?.display==="none"?i("hidden"):i(u===!0&&c!==f?"hiding":"hidden")}),s},l(t.show)),O(()=>{const u=l(t.element);if(!u)return;const s=f=>{f.target===u&&(a=n())},c=f=>{const g=n().includes(f.animationName);f.target===u&&g&&r()==="hiding"&&i("hidden")};u.addEventListener("animationstart",s),u.addEventListener("animationcancel",c),u.addEventListener("animationend",c),F(()=>{u.removeEventListener("animationstart",s),u.removeEventListener("animationcancel",c),u.removeEventListener("animationend",c)})}),{present:()=>r()==="present"||r()==="hiding",state:r}},xt=Dt,Pe=xt,Ct=(t,e)=>{switch(e){case"x":return[t.clientWidth,t.scrollLeft,t.scrollWidth];case"y":return[t.clientHeight,t.scrollTop,t.scrollHeight]}},Ft=(t,e)=>{const n=getComputedStyle(t),r=e==="x"?n.overflowX:n.overflowY;return r==="auto"||r==="scroll"||t.tagName==="HTML"&&r==="visible"},Te=(t,e,n)=>{const r=e==="x"&&window.getComputedStyle(t).direction==="rtl"?-1:1;let o=t,i=0,a=0,u=!1;do{const[s,c,f]=Ct(o,e),m=f-s-r*c;(c!==0||m!==0)&&Ft(o,e)&&(i+=m,a+=c),o===(n??document.documentElement)?u=!0:o=o._$host??o.parentElement}while(o&&!u);return[i,a]},[we,ye]=D([]),It=t=>we().indexOf(t)===we().length-1,Lt=t=>{const e=S({element:null,enabled:!0,hideScrollbar:!0,preventScrollbarShift:!0,preventScrollbarShiftMode:"padding",restoreScrollPosition:!0,allowPinchZoom:!1},t),n=W();let r=[0,0],o=null,i=null;O(()=>{l(e.enabled)&&(ye(c=>[...c,n]),F(()=>{ye(c=>c.filter(f=>f!==n))}))}),O(()=>{if(!l(e.enabled)||!l(e.hideScrollbar))return;const{body:c}=document,f=window.innerWidth-c.offsetWidth;if(l(e.preventScrollbarShift)){const m={overflow:"hidden"},g=[];f>0&&(l(e.preventScrollbarShiftMode)==="padding"?m.paddingRight=`calc(${window.getComputedStyle(c).paddingRight} + ${f}px)`:m.marginRight=`calc(${window.getComputedStyle(c).marginRight} + ${f}px)`,g.push({key:"--scrollbar-width",value:`${f}px`}));const E=window.scrollY,d=window.scrollX;de({key:"prevent-scroll",element:c,style:m,properties:g,cleanup:()=>{l(e.restoreScrollPosition)&&f>0&&window.scrollTo(d,E)}})}else de({key:"prevent-scroll",element:c,style:{overflow:"hidden"}})}),O(()=>{!It(n)||!l(e.enabled)||(document.addEventListener("wheel",u,{passive:!1}),document.addEventListener("touchstart",a,{passive:!1}),document.addEventListener("touchmove",s,{passive:!1}),F(()=>{document.removeEventListener("wheel",u),document.removeEventListener("touchstart",a),document.removeEventListener("touchmove",s)}))});const a=c=>{r=Oe(c),o=null,i=null},u=c=>{const f=c.target,m=l(e.element),g=kt(c),E=Math.abs(g[0])>Math.abs(g[1])?"x":"y",d=E==="x"?g[0]:g[1],y=Ee(f,E,d,m);let h;m&&V(m,f)?h=!y:h=!0,h&&c.cancelable&&c.preventDefault()},s=c=>{const f=l(e.element),m=c.target;let g;if(c.touches.length===2)g=!l(e.allowPinchZoom);else{if(o==null||i===null){const E=Oe(c).map((y,h)=>r[h]-y),d=Math.abs(E[0])>Math.abs(E[1])?"x":"y";o=d,i=d==="x"?E[0]:E[1]}if(m.type==="range")g=!1;else{const E=Ee(m,o,i,f);f&&V(f,m)?g=!E:g=!0}}g&&c.cancelable&&c.preventDefault()}},kt=t=>[t.deltaX,t.deltaY],Oe=t=>t.changedTouches[0]?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0],Ee=(t,e,n,r)=>{const o=r!==null&&V(r,t),[i,a]=Te(t,e,o?r:void 0);return!(n>0&&Math.abs(i)<=1||n<0&&Math.abs(a)<1)},Tt=Lt,Rt=Tt,_t=t=>{const e=S({initialRegistered:!1},t),[n,r]=D(e.initialRegistered);return[p(()=>{if(n())return l(e.value)}),()=>{r(!0)},()=>{r(!1)}]},De=_t,Re=U(),zt=t=>t===void 0?Re:re(`dialog-${t}`),_e=t=>{if(t===void 0){const n=N(Re);if(!n)throw new Error("[corvu]: Dialog context not found. Make sure to wrap Dialog components in <Dialog.Root>");return n}const e=oe(`dialog-${t}`);if(!e)throw new Error(`[corvu]: Dialog context with id "${t}" not found. Make sure to wrap Dialog components in <Dialog.Root contextId="${t}">`);return e},ze=U(),$t=t=>t===void 0?ze:re(`dialog-internal-${t}`),Z=t=>{if(t===void 0){const n=N(ze);if(!n)throw new Error("[corvu]: Dialog context not found. Make sure to wrap Dialog components in <Dialog.Root>");return n}const e=oe(`dialog-internal-${t}`);if(!e)throw new Error(`[corvu]: Dialog context with id "${t}" not found. Make sure to wrap Dialog components in <Dialog.Root contextId="${t}">`);return e},Mt=t=>{const[e,n]=k(t,["contextId","onClick"]),r=p(()=>Z(e.contextId));return b(Le,S({onClick:i=>{!Ie(e.onClick,i)&&r().setOpen(!1)},"aria-label":"close","data-corvu-dialog-close":""},n))},At=Mt,Kt=t=>{const[e,n]=k(t,["forceMount","contextId","ref","style"]),r=p(()=>Z(e.contextId)),o=()=>pe(r().open,()=>e.forceMount,r().contentPresent),i=p(()=>r().open()||r().contentPresent());return b(bt,{get element(){return r().contentRef},get enabled(){return i()},get dismissibleId(){return r().dialogId()},onDismiss:()=>r().setOpen(!1),get dismissOnEscapeKeyDown(){return r().closeOnEscapeKeyDown},get dismissOnOutsideFocus(){return r().closeOnOutsideFocus},get dismissOnOutsidePointer(){return r().closeOnOutsidePointer},get outsidePointerStrategy(){return r().closeOnOutsidePointerStrategy},outsidePointerIgnore:()=>[r().triggerRef()],get noOutsidePointerEvents(){return r().noOutsidePointerEvents},get onEscapeKeyDown(){return r().onEscapeKeyDown},get onOutsideFocus(){return r().onOutsideFocus},get onOutsidePointer(){return r().onOutsidePointer},children:a=>b(ve,{get when(){return o()},get children(){return b(j,S({as:"div",ref(u){var s=ne(r().setContentRef,e.ref);typeof s=="function"&&s(u)},get style(){return me({"pointer-events":a.isLastLayer?"auto":void 0},e.style)},get id(){return r().dialogId()},get role(){return r().role()},tabIndex:"-1",get"aria-describedby"(){return r().descriptionId()},get"aria-labelledby"(){return r().labelId()},get"aria-modal"(){return r().modal()?"true":"false"},get"data-closed"(){return I(!r().open())},get"data-open"(){return I(r().open())},"data-corvu-dialog-content":""},n))}})})},Nt=Kt,Zt=t=>{const[e,n]=k(t,["contextId"]),r=p(()=>Z(e.contextId));return O(()=>{const o=r();o.registerDescriptionId(),F(()=>o.unregisterDescriptionId())}),b(j,S({as:"p",get id(){return r().descriptionId()},"data-corvu-dialog-description":""},n))},Bt=Zt,Wt=t=>{const[e,n]=k(t,["contextId"]),r=p(()=>Z(e.contextId));return O(()=>{const o=r();o.registerLabelId(),F(()=>o.unregisterLabelId())}),b(j,S({as:"h2",get id(){return r().labelId()},"data-corvu-dialog-label":""},n))},Vt=Wt,Ut=t=>{const[e,n]=k(t,["forceMount","contextId","ref","style"]),r=p(()=>Z(e.contextId)),o=()=>pe(r().open,()=>e.forceMount,r().overlayPresent);return b(ve,{get when(){return o()},get children(){return b(j,S({as:"div",ref(i){var a=ne(r().setOverlayRef,e.ref);typeof a=="function"&&a(i)},get style(){return me({"pointer-events":"auto"},e.style)},"aria-hidden":"true",get"data-closed"(){return I(!r().open())},get"data-open"(){return I(r().open())},"data-corvu-dialog-overlay":""},n))}})},Xt=Ut,Yt=t=>{const[e,n]=k(t,["forceMount","contextId"]),r=p(()=>Z(e.contextId)),o=()=>pe(r().open,()=>e.forceMount,r().contentPresent,r().overlayPresent);return b(ve,{get when(){return o()},get children(){return b(Ue,n)}})},$e=Yt,ce=!0,jt=t=>{const e=S({role:"dialog",initialOpen:!1,modal:!0,closeOnEscapeKeyDown:!0,closeOnOutsideFocus:()=>t.trapFocus??!0,closeOnOutsidePointer:()=>t.modal??ce,closeOnOutsidePointerStrategy:"pointerup",noOutsidePointerEvents:()=>t.modal??ce,preventScroll:()=>t.modal??ce,hideScrollbar:!0,preventScrollbarShift:!0,preventScrollbarShiftMode:"padding",restoreScrollPosition:!0,allowPinchZoom:!0,trapFocus:!0,restoreFocus:!0,dialogId:W()},t),[n,r]=ge({value:()=>e.open,initialValue:e.initialOpen,onChange:e.onOpenChange}),[o,i,a]=De({value:()=>e.labelId??W()}),[u,s,c]=De({value:()=>e.descriptionId??W()}),[f,m]=D(null),[g,E]=D(null),[d,y]=D(null),{present:h}=Pe({show:n,element:g,onStateChange:P=>{P==="present"?e.onContentPresentChange?.(!0):P==="hidden"&&e.onContentPresentChange?.(!1)}}),{present:w}=Pe({show:n,element:d,onStateChange:P=>{P==="present"?e.onOverlayPresentChange?.(!0):P==="hidden"&&e.onOverlayPresentChange?.(!1)}});Ot({element:g,enabled:()=>n()&&e.trapFocus,initialFocusElement:()=>e.initialFocusEl??null,restoreFocus:()=>e.restoreFocus,finalFocusElement:()=>e.finalFocusEl??null,onFinalFocus:e.onFinalFocus,onInitialFocus:e.onInitialFocus}),Rt({element:g,enabled:()=>h()&&l(e.preventScroll),hideScrollbar:()=>e.hideScrollbar,preventScrollbarShift:()=>e.preventScrollbarShift,preventScrollbarShiftMode:()=>e.preventScrollbarShiftMode,restoreScrollPosition:()=>e.restoreScrollPosition,allowPinchZoom:()=>e.allowPinchZoom});const T={get role(){return e.role},get open(){return n()},setOpen:r,get modal(){return e.modal},get closeOnEscapeKeyDown(){return e.closeOnEscapeKeyDown},get closeOnOutsideFocus(){return l(e.closeOnOutsideFocus)},get closeOnOutsidePointer(){return l(e.closeOnOutsidePointer)},get closeOnOutsidePointerStrategy(){return e.closeOnOutsidePointerStrategy},get noOutsidePointerEvents(){return l(e.noOutsidePointerEvents)},get preventScroll(){return l(e.preventScroll)},get hideScrollbar(){return e.hideScrollbar},get preventScrollbarShift(){return l(e.preventScrollbarShift)},get preventScrollbarShiftMode(){return e.preventScrollbarShiftMode},get restoreScrollPosition(){return e.restoreScrollPosition},get allowPinchZoom(){return e.allowPinchZoom},get trapFocus(){return e.trapFocus},get restoreFocus(){return e.restoreFocus},get initialFocusEl(){return e.initialFocusEl},get finalFocusEl(){return e.finalFocusEl},get contentPresent(){return h()},get contentRef(){return g()},get overlayPresent(){return w()},get overlayRef(){return d()},get dialogId(){return e.dialogId},get labelId(){return o()},get descriptionId(){return u()}},K=ke(()=>e.children),L=()=>{const P=K()();return he(P)?P(T):P};return p(()=>{const P=zt(e.contextId),_=$t(e.contextId);return b(P.Provider,{value:{role:()=>e.role,open:n,setOpen:r,modal:()=>e.modal,closeOnEscapeKeyDown:()=>e.closeOnEscapeKeyDown,closeOnOutsideFocus:()=>l(e.closeOnOutsideFocus),closeOnOutsidePointer:()=>l(e.closeOnOutsidePointer),closeOnOutsidePointerStrategy:()=>e.closeOnOutsidePointerStrategy,noOutsidePointerEvents:()=>l(e.noOutsidePointerEvents),preventScroll:()=>l(e.preventScroll),hideScrollbar:()=>e.hideScrollbar,preventScrollbarShift:()=>l(e.preventScrollbarShift),preventScrollbarShiftMode:()=>e.preventScrollbarShiftMode,restoreScrollPosition:()=>e.restoreScrollPosition,allowPinchZoom:()=>e.allowPinchZoom,trapFocus:()=>e.trapFocus,restoreFocus:()=>e.restoreFocus,initialFocusEl:()=>e.initialFocusEl,finalFocusEl:()=>e.finalFocusEl,contentPresent:h,contentRef:g,overlayPresent:w,overlayRef:d,dialogId:()=>e.dialogId,labelId:o,descriptionId:u},get children(){return b(_.Provider,{get value(){return{role:()=>e.role,open:n,setOpen:r,modal:()=>e.modal,closeOnEscapeKeyDown:()=>e.closeOnEscapeKeyDown,onEscapeKeyDown:e.onEscapeKeyDown,closeOnOutsideFocus:()=>l(e.closeOnOutsideFocus),closeOnOutsidePointer:()=>l(e.closeOnOutsidePointer),closeOnOutsidePointerStrategy:()=>e.closeOnOutsidePointerStrategy,onOutsideFocus:e.onOutsideFocus,onOutsidePointer:e.onOutsidePointer,noOutsidePointerEvents:()=>l(e.noOutsidePointerEvents),preventScroll:()=>l(e.preventScroll),hideScrollbar:()=>e.hideScrollbar,preventScrollbarShift:()=>l(e.preventScrollbarShift),preventScrollbarShiftMode:()=>e.preventScrollbarShiftMode,restoreScrollPosition:()=>e.restoreScrollPosition,allowPinchZoom:()=>e.allowPinchZoom,trapFocus:()=>e.trapFocus,restoreFocus:()=>e.restoreFocus,initialFocusEl:()=>e.initialFocusEl,finalFocusEl:()=>e.finalFocusEl,contentPresent:h,contentRef:g,overlayPresent:w,overlayRef:d,dialogId:()=>e.dialogId,labelId:o,registerLabelId:i,unregisterLabelId:a,descriptionId:u,registerDescriptionId:s,unregisterDescriptionId:c,setContentRef:E,setOverlayRef:y,triggerRef:f,setTriggerRef:m}},get children(){return $(()=>L())}})}})})},qt=jt,Ht=t=>{const[e,n]=k(t,["contextId","ref","onClick"]),r=p(()=>Z(e.contextId));return b(Le,S({ref(i){var a=ne(r().setTriggerRef,e.ref);typeof a=="function"&&a(i)},onClick:i=>{!Ie(e.onClick,i)&&r().setOpen(a=>!a)},get"aria-controls"(){return r().dialogId()},get"aria-expanded"(){return r().open()?"true":"false"},"aria-haspopup":"dialog",get"data-closed"(){return I(!r().open())},get"data-open"(){return I(r().open())},"data-corvu-dialog-trigger":""},n))},Gt=Ht,Jt=Object.assign(qt,{Trigger:Gt,Portal:$e,Overlay:Xt,Content:Nt,Label:Vt,Description:Bt,Close:At,useContext:_e}),A=Jt,Qt=t=>{const[e,n]=D(0);O(()=>{const i=l(t.element);if(!i)return;o(i);const a=new ResizeObserver(r);a.observe(i),F(()=>{a.disconnect()})});const r=([i])=>{o(i.target)},o=i=>{switch(l(t.dimension)){case"width":n(i.offsetWidth);break;case"height":n(i.offsetHeight);break}};return e},en=Qt,G=t=>typeof t=="function"?t():t,xe=t=>requestAnimationFrame(()=>requestAnimationFrame(t));function tn(t){const e=S({enabled:!0,dimension:"both"},t),[n,r]=D(!1),[o,i]=D(null);let a=null;O(()=>{const c=G(e.element),f=G(e.enabled);if(!c||!f)return;const m=new ResizeObserver(u);m.observe(c),c.addEventListener("transitionend",s),F(()=>{m.disconnect(),c.removeEventListener("transitionend",s),s()})});const u=([c])=>{if(n())return;const f=c.target,m=[f.offsetWidth,f.offsetHeight],g=G(e.dimension);g==="both"?a?a[0]!==m[0]&&a[1]!==m[1]&&(z(()=>{i(a),r(!0)}),xe(()=>{i(m),parseFloat(getComputedStyle(c.target).transitionDuration)===0&&s()})):a=m:a?J(g,a)!==J(g,m)&&(z(()=>{i(J(g,a)),r(!0)}),xe(()=>{i(J(g,m)),parseFloat(getComputedStyle(c.target).transitionDuration)===0&&s()})):a=m},s=()=>{if(!n())return;const c=G(e.element);c?a=[c.offsetWidth,c.offsetHeight]:a=null,z(()=>{r(!1),i(null)})};return{transitioning:n,transitionSize:o}}var J=(t,e)=>{switch(t){case"width":return e[0];case"height":return e[1]}},nn=tn,rn=nn;const on=(t,e)=>t.length>0?()=>t($(e)):t;function sn(t,e){let n=0;const r=t.map((o,i)=>p(()=>(n=i,o()),void 0,ue));return p(()=>r.map(o=>o())[n],void 0,e)}function Ce(t,e,n){let r=()=>e;const[o,i]=D(e,ue),a=p(on(t,()=>r()),e,ue);return[r=sn([o,a],n),u=>i(()=>typeof u=="function"?u($(r)):u)]}var an=t=>b(A.Close,S({"data-corvu-drawer-close":"","data-corvu-dialog-close":null},t)),ln=an,Me=(t,e,n,r)=>{if(n===void 0||r===void 0)return{value:t,offset:Q(t,e)};const o=r[n-1]!==void 0&&r[n-1]!==null?Q(r[n-1],e):void 0,i=r[n]!==void 0&&r[n]!==null?Q(r[n],e):void 0;return{value:t,offset:Q(t,e),lowerBreakPoint:i,upperBreakPoint:o}},Q=(t,e)=>{if(typeof t=="number")return e-t*e;if(!t.endsWith("px"))throw new Error(`[corvu] Snap and break points must be a number or a string ending with 'px'. Got ${t}`);return e-parseInt(t,10)},cn=(t,e,n,r)=>{const o=Fe("upper",t,r?n:e),i=Fe("lower",t,r?n:e);return o?i?i.upperBreakPoint===void 0||o.lowerBreakPoint===void 0?Math.abs(i.offset-n)<Math.abs(o.offset-n)?i:o:n<o.lowerBreakPoint?i:o:o:i},Fe=(t,e,n)=>e.reduce((r,o)=>t=="upper"&&o.offset>=n&&(!r||o.offset<r.offset)||t=="lower"&&o.offset<=n&&(!r||o.offset>r.offset)?o:r,void 0),un=(t,e,n)=>{let r=t,o=!1;do{if(r.hasAttribute("data-corvu-no-drag")||r.type==="range"||r.tagName==="SELECT"&&n==="mouse")return!1;r===e?o=!0:r=r.parentElement}while(r&&!o);return!0},Ae=U(),dn=t=>t===void 0?Ae:re(`drawer-${t}`),fn=t=>{if(t===void 0){const n=N(Ae);if(!n)throw new Error("[corvu]: Drawer context not found. Make sure to wrap Drawer components in <Drawer.Root>");return n}const e=oe(`drawer-${t}`);if(!e)throw new Error(`[corvu]: Drawer context with id "${t}" not found. Make sure to wrap Drawer components in <Drawer.Root contextId="${t}">`);return e},Ke=U(),gn=t=>t===void 0?Ke:re(`drawer-internal-${t}`),Ne=t=>{if(t===void 0){const n=N(Ke);if(!n)throw new Error("[corvu]: Drawer context not found. Make sure to wrap Drawer components in <Drawer.Root>");return n}const e=oe(`drawer-internal-${t}`);if(!e)throw new Error(`[corvu]: Drawer context with id "${t}" not found. Make sure to wrap Drawer components in <Drawer.Root contextId="${t}">`);return e},vn=t=>{const[e,n]=k(t,["contextId","style"]);let r=!1,o=null,i=[0,0],a,u=0;const s=p(()=>Ne(e.contextId)),c=p(()=>A.useContext(e.contextId)),f=p(()=>s().snapPoints().map((v,P)=>Me(v,s().drawerSize(),P,s().breakPoints()))),m=p(()=>{switch(s().side()){case"top":return`translate3d(0, ${-s().translate()}px, 0)`;case"bottom":return`translate3d(0, ${s().translate()}px, 0)`;case"right":return`translate3d(${s().translate()}px, 0, 0)`;case"left":return`translate3d(${-s().translate()}px, 0, 0)`}}),g=p(()=>{const v=s().transitionSize();if(v!==null)switch(s().side()){case"top":case"bottom":return`${v}px`}}),E=p(()=>{const v=s().transitionSize();if(v!==null)switch(s().side()){case"left":case"right":return`${v}px`}});O(()=>{c().open()&&(document.addEventListener("pointermove",y),document.addEventListener("touchmove",h),document.addEventListener("pointerup",T),document.addEventListener("touchend",K),document.addEventListener("contextmenu",L),F(()=>{document.removeEventListener("pointermove",y),document.removeEventListener("touchmove",h),document.removeEventListener("pointerup",T),document.removeEventListener("touchend",K),document.removeEventListener("contextmenu",L)}))}),O(()=>{s().transitionState()==="closing"&&s().setIsDragging(!1)});const d=v=>{v.button===0&&un(v.target,c().contentRef(),v.pointerType)&&s().transitionState()!=="closing"&&(r=!0,s().handleScrollableElements()&&(i=[v.clientX,v.clientY]))},y=v=>{w(v.target,v.clientX,v.clientY)},h=v=>{v.touches[0]&&w(v.target,v.touches[0].clientX,v.touches[0].clientY)},w=(v,P,_)=>{if(!r)return;if(!s().isDragging()||o===null){const q=window.getSelection();if(q&&q.toString().length>0){L();return}if(s().handleScrollableElements()){const B=[P,_].map((Be,We)=>i[We]-Be),ie=Math.abs(B[0])>Math.abs(B[1])?"x":"y",C=ie==="x"?B[0]:B[1];if(Math.abs(C)<.3)return;const R=c().contentRef(),[M,Ze]=Te(v,ie,R);if(C>0&&Math.abs(M)>1||C<0&&Math.abs(Ze)>0){L();return}}switch(s().side()){case"top":case"bottom":o=_;break;case"right":case"left":o=P}a=new Date,u=s().translate(),z(()=>{s().setIsDragging(!0),s().setTransitionState(null)})}let x;switch(s().side()){case"top":x=-(o-_);break;case"bottom":x=o-_;break;case"right":x=o-P;break;case"left":x=-(o-P);break}x-=s().resolvedActiveSnapPoint().offset,x>0&&(x=s().dampFunction(x));const X=new Date;X.getTime()-a.getTime()>s().velocityCacheReset()&&(a=X,u=s().translate()),s().setTranslate(-x)},T=v=>{v.pointerType!=="touch"&&L()},K=v=>{v.touches.length===0&&L()},L=()=>{if(r=!1,!s().isDragging())return;const v=new Date,P=s().velocityFunction(-(u-s().translate()),v.getTime()-a.getTime()||1),_=s().translate()*P,x=cn(f(),s().translate(),_,s().allowSkippingSnapPoints());z(()=>{s().setTransitionState("snapping"),s().setIsDragging(!1)}),z(()=>{s().setActiveSnapPoint(x.value),x.offset===s().drawerSize()?c().setOpen(!1):(s().setTranslate(x.offset),parseFloat(s().drawerStyles().transitionDuration)===0&&s().setTransitionState(null))})};return b(A.Content,S({get contextId(){return e.contextId},get style(){return me({transform:m(),"transition-duration":s().isDragging()?"0ms":void 0,height:g(),width:E()},e.style)},onPointerDown:d,onTouchStart:v=>{v.touches.length===1&&(o=null)},onTransitionEnd:v=>{v.target===c().contentRef()&&z(()=>{s().transitionState()==="closing"&&s().closeDrawer(),s().transitionState()!=="resizing"&&s().setTransitionState(null)})},get"data-side"(){return s().side()},get"data-opening"(){return I(s().transitionState()==="opening")},get"data-closing"(){return I(s().transitionState()==="closing")},get"data-snapping"(){return I(s().transitionState()==="snapping")},get"data-transitioning"(){return I(s().isTransitioning())},get"data-resizing"(){return I(s().transitionState()==="resizing")},"data-corvu-drawer-content":"","data-corvu-dialog-content":null},n))},mn=vn,pn=t=>b(A.Description,S({"data-corvu-drawer-description":"","data-corvu-dialog-description":null},t)),hn=pn,bn=t=>b(A.Label,S({"data-corvu-drawer-label":"","data-corvu-dialog-label":null},t)),Sn=bn,Pn=t=>{const[e,n]=k(t,["contextId"]),r=p(()=>Ne(e.contextId));return b(A.Overlay,S({get contextId(){return e.contextId},get"data-side"(){return r().side()},get"data-opening"(){return I(r().transitionState()==="opening")},get"data-closing"(){return I(r().transitionState()==="closing")},get"data-snapping"(){return I(r().transitionState()==="snapping")},get"data-transitioning"(){return I(r().isTransitioning())},get"data-resizing"(){return I(r().transitionState()==="resizing")},"data-corvu-drawer-overlay":"","data-corvu-dialog-overlay":null},n))},wn=Pn,yn=t=>{const e=S({initialOpen:!1,snapPoints:[0,1],breakPoints:[null],defaultSnapPoint:1,side:"bottom",dampFunction:C=>6*Math.log(C+1),velocityFunction:(C,R)=>{const M=C/R;return M<1&&M>-1?1:M},velocityCacheReset:200,allowSkippingSnapPoints:!0,handleScrollableElements:!0,transitionResize:!1,closeOnOutsidePointer:!0,allowPinchZoom:!1},t),[n,r]=k(e,["snapPoints","breakPoints","defaultSnapPoint","activeSnapPoint","onActiveSnapPointChange","side","dampFunction","velocityFunction","velocityCacheReset","allowSkippingSnapPoints","handleScrollableElements","transitionResize","open","initialOpen","onOpenChange","closeOnOutsidePointer","contextId","children"]),[o,i]=ge({value:()=>n.open,initialValue:n.initialOpen,onChange:n.onOpenChange}),[a,u]=ge({value:()=>n.activeSnapPoint,initialValue:0,onChange:n.onActiveSnapPointChange}),[s,c]=D(),{transitioning:f,transitionSize:m}=rn({element:()=>s()?.contentRef()??null,enabled:()=>o()&&n.transitionResize,dimension:()=>{switch(n.side){case"top":case"bottom":return"height";case"left":case"right":return"width"}}}),[g,E]=D(!1),[d,y]=Ce(()=>f()?"resizing":null),h=p(()=>{const C=s()?.contentRef();if(C)return getComputedStyle(C)}),[w,T]=D(!1);O(()=>{const C=o();$(()=>{w()!==C&&(C?(T(!0),Y(()=>{z(()=>{y("opening"),u(n.defaultSnapPoint)}),parseFloat(h().transitionDuration)===0&&y(null)})):(z(()=>{y("closing"),u(0)}),Y(()=>{parseFloat(h().transitionDuration)===0&&K()})))})});const K=()=>{z(()=>{T(!1),y(null)})},L=en({element:()=>s()?.contentRef()??null,dimension:()=>{switch(n.side){case"top":case"bottom":return"height";case"left":case"right":return"width"}}}),v=p(()=>Me(a(),L())),[P,_]=Ce(()=>v().offset),x=p(()=>L()?(L()-P())/L():0),X={get snapPoints(){return n.snapPoints},get breakPoints(){return n.breakPoints},get defaultSnapPoint(){return n.defaultSnapPoint},get activeSnapPoint(){return a()},setActiveSnapPoint:u,get side(){return n.side},get isDragging(){return g()},get isTransitioning(){return d()!==null},get transitionState(){return d()},get openPercentage(){return x()},get translate(){return P()},get velocityCacheReset(){return n.velocityCacheReset},get allowSkippingSnapPoints(){return n.allowSkippingSnapPoints},get handleScrollableElements(){return n.handleScrollableElements},get transitionResize(){return n.transitionResize}},q=ke(()=>n.children),B=C=>{c(A.useContext(n.contextId));const R=q()();if(he(R)){const M=S(C,X);return R(M)}return R};return p(()=>{const C=dn(n.contextId),R=gn(n.contextId);return $(()=>b(C.Provider,{value:{snapPoints:()=>n.snapPoints,breakPoints:()=>n.breakPoints,defaultSnapPoint:()=>n.defaultSnapPoint,activeSnapPoint:a,setActiveSnapPoint:u,side:()=>n.side,isDragging:g,isTransitioning:()=>d()!==null,transitionState:d,openPercentage:x,translate:P,velocityCacheReset:()=>n.velocityCacheReset,allowSkippingSnapPoints:()=>n.allowSkippingSnapPoints,handleScrollableElements:()=>n.handleScrollableElements,transitionResize:()=>n.transitionResize},get children(){return b(R.Provider,{get value(){return{snapPoints:()=>n.snapPoints,breakPoints:()=>n.breakPoints,defaultSnapPoint:()=>n.defaultSnapPoint,activeSnapPoint:a,setActiveSnapPoint:u,side:()=>n.side,isDragging:g,isTransitioning:()=>d()!==null,transitionState:d,openPercentage:x,translate:P,velocityCacheReset:()=>n.velocityCacheReset,allowSkippingSnapPoints:()=>n.allowSkippingSnapPoints,handleScrollableElements:()=>n.handleScrollableElements,transitionResize:()=>n.transitionResize,dampFunction:n.dampFunction,velocityFunction:n.velocityFunction,setIsDragging:E,setTranslate:_,drawerSize:L,resolvedActiveSnapPoint:v,drawerStyles:h,setTransitionState:y,transitionSize:m,closeDrawer:K}},get children(){return b(A,S({get open(){return w()},onOpenChange:i,get contextId(){return n.contextId},get closeOnOutsidePointer(){return!g()&&n.closeOnOutsidePointer}},r,{children:M=>B(M)}))}})}}))})},On=yn,En=t=>b(A.Trigger,S({"data-corvu-drawer-trigger":"","data-corvu-dialog-trigger":null},t)),Dn=En,xn=Object.assign(On,{Trigger:Dn,Portal:$e,Overlay:wn,Content:mn,Label:Sn,Description:hn,Close:ln,useContext:fn,useDialogContext:_e}),te=xn;function Ln(t){const e=()=>t.side??"right",n=()=>t.contextId,r=()=>t.children,o=()=>t.open??void 0,i=()=>t.setOpen??void 0;return b(te,{get open(){return o()},get onOpenChange(){return i()},get contextId(){return n()},breakPoints:[1],get side(){return e()},children:a=>[Xe(r),b(te.Portal,{get contextId(){return n()},get children(){return b(te.Overlay,{get contextId(){return n()},class:"fixed h-sc inset-0 z-40 data-transitioning:transition-colors data-transitioning:duration-500 data-transitioning:ease-[cubic-bezier(0.32,0.72,0,1)]",get style(){return{"background-color":`rgb(0 0 0 / ${.5*a.openPercentage})`}}})}})]})}const kn=t=>{const[,e]=k(t,["children","contextId","class","side","children"]);let r={top:"fixed w-full inset-x-0 top-0 z-50 flex h-full border-l-2 border-b-2 border-r-2  rounded-b-lg after:absolute after:inset-x-0 after:top-[calc(100%-1px)] after:h-1/2 z-50 flex flex-col pt-3 after:bg-inherit data-transitioning:transition-transform data-transitioning:duration-500 data-transitioning:ease-[cubic-bezier(0.32,0.72,0,1)] md:select-none",right:"fixed inset-y-0 right-0 z-50 w-screen border-l-2 flex h-screen flex-col after:bg-inherit data-transitioning:transition-transform data-transitioning:duration-500 data-transitioning:ease-[cubic-bezier(0.32,0.72,0,1)] md:select-none",bottom:"fixed w-full inset-x-0 bottom-0 z-50 flex h-full border-l-2 border-t-2 border-r-2  sm:rounded-t-lg after:absolute after:inset-x-0 after:top-[calc(100%-1px)] after:h-1/2 z-50 flex flex-col pt-3 after:bg-inherit data-transitioning:transition-transform data-transitioning:duration-500 data-transitioning:ease-[cubic-bezier(0.32,0.72,0,1)] md:select-none",left:"fixed inset-y-0 left-0 z-50 w-screen md:max-w-md border-r-2 flex h-screen flex-col after:bg-inherit data-transitioning:transition-transform data-transitioning:duration-500 data-transitioning:ease-[cubic-bezier(0.32,0.72,0,1)] md:select-none"}[t.side??"bottom"];return b(te.Content,S({get contextId(){return t.contextId},get class(){return Ye("border-corvu-400 bg-corvu-bg",r,t.class)}},e,{get children(){return t.children}}))};export{Ln as B,kn as D,te as i};
