import{K as p,q as w,L as S,N as a,O as U,Q as m,R as d,U as y,V as N,W as f,X as v}from"./index-BluaQEOQ.js";import{a as c}from"./utils-CGYcAGdn.js";w(async()=>{let e=await S();return console.log("getUser",e),e},"user");a(async e=>{let t=await U();if(!t)throw m("/");const n={username:String(e.get("username")),token:t.token};let r=await d(n);return console.log("getUserDetailsHandler",r),r});const H=a(async e=>{let t=String(e.get("firstName")),n=String(e.get("lastName")),r=String(e.get("username")),i=t.toLowerCase(),o=n.toLowerCase(),l=c(i)+" "+c(o),g=String(e.get("email"));const u={name:l,username:r,email:g.toLowerCase(),password:String(e.get("password"))};let s=await y(u);if(console.log("registerUserHandler",s),s.user?.id)throw m("/login");return s}),L=async e=>{let t=Number(e.get("id")),n=String(e.get("name")),r=String(e.get("username")),i=String(e.get("email")),o=String(e.get("bio"))??"",l=!!e.get("active"),g=String(e.get("token"));const u={id:t,name:n,username:r,email:i.toLowerCase(),bio:o,active:l,token:g};let s=await p(u);return console.log("updateUser",s),s},C=async e=>v({token:e});a(async e=>{const t={email:String(e.get("email"))};return N(t)});const b=a(async e=>{const t={username:String(e.get("username")),password:String(e.get("password"))};return console.log(t),await f(t)});export{C as a,b as l,H as r,L as u};
